## Браузерный отладчик

Браузерный отладчик представляет собой web-сервер, позволяющий запустить в любом современном браузере плагины, и поведение должно быть максимально похожим на поведение на мобильных устройствах.

Для установки зависимостей необходимо в корне репозитория выполнить команду `yarn`.

Советуем сразу открыть консоль разработчика, т.к., к сожалению, пока что мы мало чего рисуем в браузере на UI, и основная коммуникация (вывод ошибок, печать результата) выводится в браузерную консоль.

Содержимое request/response-ов, логгируемое через fetchJson, мы пишем в console.debug(). Помните, что debug стрим логов по умолчанию выключен в консоли браузера.

В Chrome увидеть debug стрим можно включив `Verbose` уровень, как показано ниже:

![console levels](console-levels.png)

### Ввод настроек

Допустим, вы разрабатывате плагин `example`, расположенный в `/src/plugins/example`.

Вам необходимо создать файл `/src/plugins/example/zp_preferences.json` со значениями настроек, описанных вами в `/src/plugins/example/preferences.xml` и содержимым:

```javascript
{
    "login": "example-login",
    "password": "example-password",
    "startDate": "2017-12-01T00:00:00.000Z"
}
```

Окружение проверит наличие заполненных `obligatory` полей в `zp_preferences.json`

### Сохранение данных между вызовами плагина

Данные читаются и сохраняются в `zp_data.json` в папке разрабатываемого плагина.

### Получение текстового ввода

```
const smsCode = await ZenMoney.readLine("Введите код из СМС сообщения");
```

### Запуск

Для запуска сервера разработки необходимо указать имя плагина в качестве аргумента к команде `yarn start`.

Для вышеприведенного примера `/src/plugins/example` достаточно выполнить:

```bash
yarn start example
```

При старте начинает работу web-сервер, занимающийся сборкой скриптов и проксированием запросов к сторонним хостам.

После старта в браузере автоматически открывается страница с плагином.

Не забудьте открыть инструменты разработчика!
